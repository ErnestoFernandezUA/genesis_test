(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{73:function(e,t,n){"use strict";n.r(t);var r,o,c,a,s,i,u,d,l,b,p,f,j,g,x,O,h,m,v,w,k,y,S,E,T,C,P,A,z,L,R,B=n(48),I=n.n(B),F=n(33),H=n(51),M=n(4),N=n(7),D=n(0),G=n(24),U=n(8),_=n(3),V=function(){return Object(_.jsx)("div",{children:"This page doesn\xa0t exist."})},q=F.b,W=F.c,X=Object(U.d)(r||(r=Object(N.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n"]))),J=U.c.div(o||(o=Object(N.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n"]))),K=U.c.div(c||(c=Object(N.a)(["\n  border-radius: 50%;\n  width: 2em;\n  height: 2em;\n  margin: 1em auto;\n  border: 0.3em solid #ddd;\n  border-left-color: #000;\n  animation: "," 1.2s infinite linear;\n"])),X),Q=function(){return console.log("Loader ...."),Object(_.jsx)(J,{children:Object(_.jsx)(K,{})})},Y=U.c.div(a||(a=Object(N.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n\n  ","\n"])),(function(e){return"error"===e.status&&Object(U.b)(s||(s=Object(N.a)(["\n    color: red;\n  "])))})),Z=function(e){var t=e.message,n=e.status,r=void 0===n?"casual":n;return Object(_.jsx)(Y,{status:r,children:Object(_.jsx)("h2",{children:t})})},$=n(17),ee=n(15),te=n(20),ne={storage:[],token:null,statusLoading:"idle",error:null},re=Object(te.b)({name:"courses",initialState:ne,reducers:{setCourses:function(e,t){console.log("setCourses"),e.storage=Object(ee.a)(t.payload.map((function(e){return Object($.a)(Object($.a)({},e),{},{detailed:null})})))},setDetailed:function(e,t){console.log("setDetailed"),e.storage=Object(ee.a)(e.storage.map((function(e){return e.id===t.payload.id?Object($.a)(Object($.a)({},e),{},{detailed:t.payload}):e})))},setStatus:function(e,t){e.statusLoading=t.payload},resetError:function(e){e.error=ne.error},setError:function(e,t){e.error=t.payload,e.statusLoading="failed"},setToken:function(e,t){console.log("setToken"),e.token=t.payload},resetStateExceptToken:function(e){return Object($.a)(Object($.a)(Object($.a)({},e),ne),{},{token:e.token})},resetState:function(e){return Object($.a)(Object($.a)({},e),ne)}}}),oe=re.reducer,ce=re.actions,ae=ce.setCourses,se=ce.setDetailed,ie=ce.setStatus,ue=ce.resetError,de=ce.setError,le=ce.setToken,be=ce.resetStateExceptToken,pe=(ce.resetState,function(e){return e.courses.storage}),fe=function(e){return e.courses.statusLoading},je=function(e){return e.courses.error},ge=function(e){return e.courses.token},xe=U.c.div(i||(i=Object(N.a)(["\n  text-align: center;\n  padding: 20px;\n"]))),Oe=function(e){var t=e.children;return Object(_.jsx)(xe,{children:Object(_.jsx)("h2",{children:t})})},he=U.c.div(u||(u=Object(N.a)(["\n  display: grid;\n  grid-template-columns: repeat(5, minmax(300px, 1fr));\n  gap: 20px;\n  justify-items: center;\n  align-items: center;\n  justify-content: center;\n"]))),me=function(e){var t=e.children;return Object(_.jsx)(he,{children:t})},ve=n(55),we=U.c.div(d||(d=Object(N.a)(["\n  /* display: inline-flex; */\n  /* flex-direction: column;\n  align-items: center;\n  justify-content: baseline; */\n  width: 280px;\n  height: 450px;\n  border-radius: 10px;\n  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  margin: 10px;\n  box-sizing: border-box;\n  /* padding: 0 0 20px; */\n  /* border: 1px solid red; */\n\n  &:hover {\n    ","\n  }\n\n  ","\n"])),(function(e){return"card"===e.format&&Object(U.b)(l||(l=Object(N.a)(["\n    cursor: pointer;\n  "])))}),(function(e){return"page"===e.format&&Object(U.b)(b||(b=Object(N.a)(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n    border-radius: none;\n    box-shadow: none;\n    overflow: visible;\n    margin: 0;\n    padding: 0;\n  "])))})),ke=U.c.img(p||(p=Object(N.a)(["\n  width: 100%;\n  height: 120px;\n  object-fit: cover;\n  overflow: hidden;\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(U.b)(f||(f=Object(N.a)(["\n    width: 300px;\n    height: 400px;\n    object-fit: cover;\n    overflow: visible;\n    margin: 0 auto;\n  "])))})),ye=U.c.div(j||(j=Object(N.a)(["\n  /* display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center; */\n  /* padding: 20px; */\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(U.b)(g||(g=Object(N.a)(["\n    padding: 50px;\n  "])))})),Se=U.c.h2(x||(x=Object(N.a)(["\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 7px;\n  max-width: 250px;\n  text-align: left;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-direction: normal;\n  -webkit-box-orient: vertical;\n  overflow-wrap: normal;\n  height: 48px;\n  padding: 0 20px;\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(U.b)(O||(O=Object(N.a)(["\n    font-size: 50px;\n    margin-top: 20px;\n    margin-bottom: 40px;\n    max-width: none;\n    -webkit-line-clamp: inherit;\n    text-align: center;\n    overflow: visible;\n    text-overflow: none;\n    height: auto;\n  "])))})),Ee=U.c.div(h||(h=Object(N.a)(["\n  height: 160px;\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(U.b)(m||(m=Object(N.a)(["\n    height: auto;\n  "])))})),Te=U.c.p(v||(v=Object(N.a)(["\n  font-size: 14px;\n  text-align: left;\n  height: 60px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-direction: normal;\n  -webkit-box-orient: vertical;\n  overflow-wrap: break-word;\n  padding: 5px 20px 0;\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(U.b)(w||(w=Object(N.a)(["\n    font-size: 24px;\n    text-align: center;\n    max-height: min-content;\n    text-overflow: clip;\n    overflow: visible;\n    -webkit-line-clamp: inherit;\n  "])))})),Ce=U.c.h3(k||(k=Object(N.a)(["\n  font-size: 24px;\n  font-weight: bold;\n  margin-top: 10px;\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(U.b)(y||(y=Object(N.a)(["\n    font-size: 34px;\n    font-weight: bold;\n    margin-top: 20px;\n  "])))})),Pe=U.c.div(S||(S=Object(N.a)(["\n  margin-top: 5px;\n  text-align: left;\n  align-self: flex-start;\n  font-size: 14px;\n  padding: 5px 20px 0;\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(U.b)(E||(E=Object(N.a)(["\n  "])))})),Ae=function(e){var t,n,r=e.course,o=e.format,c=void 0===o?"card":o,a=Object(D.useRef)(null),s=r.description,i=r.previewImageLink,u=r.title,d=r.id,l=r.rating,b=(null===(t=r.meta)||void 0===t||null===(n=t.courseVideoPreview)||void 0===n?void 0:n.link)||"";Object(D.useEffect)((function(){function e(){var e=a.current;e&&console.log("handlePause",e.currentTime)}var t=a.current;return t&&t.addEventListener("pause",e),function(){t&&t.removeEventListener("pause",e)}}),[a]);var p=Object(M.m)();function f(){var e=a.current;"card"===c&&e&&e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>e.HAVE_CURRENT_DATA&&(console.log("pauseVideo",u),e.controls=!e.controls,e.pause())}return Object(_.jsxs)(we,{onClick:function(){"card"===c&&(f(),p("course/".concat(d),{replace:!0}))},format:c,onMouseEnter:function(){return function(){var e=a.current;"card"===c&&e&&b&&(console.log("playVideo"),e.controls=!e.controls,e.volume=0,e.play())}()},onMouseLeave:function(){return f()},children:[Object(_.jsx)(ke,{src:"".concat(i,"/cover.webp"),alt:s,format:c}),Object(_.jsxs)(ye,{format:c,children:[Object(_.jsx)(Se,{format:c,children:u}),Object(_.jsx)(Ee,{format:c,children:Object(_.jsx)(ve.a,{playerRef:a,src:b,autoPlay:!1,controls:!0,width:"100%",height:"100%",hlsConfig:{startPosition:-1}})}),Object(_.jsx)(Te,{format:c,children:s}),Object(_.jsx)(Ce,{format:c}),Object(_.jsxs)(Pe,{format:c,children:["Rating:\xa0",l]})]})]})},ze=U.c.div(T||(T=Object(N.a)(["\n"]))),Le=function(){var e="loading"===W(fe),t=W(je),n=W(pe);return t?Object(_.jsx)(Z,{message:t,status:"error"}):Object(_.jsxs)(ze,{children:[Object(_.jsx)(Oe,{children:"Courses:"}),e&&Object(_.jsx)(Q,{}),Object(_.jsx)(me,{children:n.map((function(e){return Object(_.jsx)(Ae,{course:e},e.id)}))})]})},Re=n(57),Be={storage:[],totalSum:0,totalCount:0,showSuccess:!1,statusPosting:"idle",error:null},Ie=Object(te.b)({name:"basket",initialState:Be,reducers:{addProductToBasket:function(e,t){var n=t.payload,r=n.count,o=n.product,c=e.storage.findIndex((function(e){return e.product.id===o.id}));c>=0?e.storage[c].countOrdered+=r:e.storage.push({product:o,countOrdered:r}),e.totalSum=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100,e.totalCount=e.storage.reduce((function(e,t){return e+t.countOrdered}),0)},removeProductFromBasket:function(e,t){var n=t.payload,r=n.count,o=n.product,c=e.storage.findIndex((function(e){return e.product.id===o.id}));c>=0&&e.storage[c].countOrdered>=r&&(e.storage[c].countOrdered-=r,e.totalSum=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100,e.totalCount=e.storage.reduce((function(e,t){return e+t.countOrdered}),0))},deleteProductInBasket:function(e,t){var n=t.payload.product,r=e.storage.findIndex((function(e){return e.product.id===n.id}));r>=0&&(e.storage.splice(r,1),e.totalSum=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100,e.totalCount=e.storage.reduce((function(e,t){return e+t.countOrdered}),0))},sendOrderToServer:function(){console.log("sendOrderToServer")},setShowSuccess:function(e,t){e.showSuccess=t.payload},setStatusPosting:function(e,t){e.statusPosting=t.payload},setError:function(e,t){e.error=t.payload,e.statusPosting="failed"},clearBasket:function(){return Be}}}),Fe=Ie.reducer,He=Ie.actions,Me=(He.addProductToBasket,He.removeProductFromBasket,He.deleteProductInBasket,He.sendOrderToServer,He.setShowSuccess,He.setStatusPosting,He.setError,He.clearBasket),Ne=function(e){return e.basket.storage},De=function(e){return e.basket.totalCount},Ge=U.c.button(C||(C=Object(N.a)(["\n  padding: 0;\n  margin: 0;\n  border: none;\n  background-color: transparent;\n  outline: none;\n  justify-content: center;\n  cursor: pointer;\n  height: fit-content;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: 'Raleway', sans-serif;\n\n  &:hover{\n    text-decoration: underline;\n  }\n"]))),Ue={storage:[],statusLoading:"idle",error:null},_e=Object(te.b)({name:"products",initialState:Ue,reducers:{setProducts:function(e,t){e.storage=t.payload},setStatus:function(e,t){e.statusLoading=t.payload},setError:function(e,t){e.error=t.payload,e.statusLoading="failed"},resetState:function(e){return Object($.a)(Object($.a)({},e),Ue)}}}),Ve=_e.reducer,qe=_e.actions,We=(qe.setProducts,qe.setStatus,qe.setError,qe.resetState,function(e){return e.products.storage}),Xe="saga/FETCH_TOKEN",Je="saga/FETCH_COURSES",Ke="saga/FETCH_COURSE",Qe=function(){return{type:Xe}},Ye=function(){return{type:Je}},Ze=function(e){return{type:Ke,payload:e}},$e=U.c.div(P||(P=Object(N.a)(["\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px;\n"]))),et=function(){var e=q(),t=W(Ne),n=W(We),r=W(De);return Object(_.jsxs)($e,{children:[Object(_.jsx)(G.a,{to:"/",children:Object(_.jsx)(Re.a,{})}),!n.length&&Object(_.jsx)(Ge,{onClick:function(){return e(Ye())},children:"reload courses"}),!!t.length&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Ge,{onClick:function(){return e(Me())},children:"Clear basket"}),"Total:",r]})]})},tt=U.c.div(A||(A=Object(N.a)(["\n  margin: 0 auto;\n  grid-template-columns: repeat(4, minmax(400px, 1fr));\n  gap: 20px;\n  margin: 0 auto;\n  padding: 20px;\n"]))),nt=function(){var e=q(),t=Object(M.o)().id,n=W(pe).find((function(e){return String(e.id)===t}));return Object(D.useEffect)((function(){!t||null!==n&&void 0!==n&&n.detailed||e(Ze(t))}),[]),Object(_.jsx)(tt,{children:n&&Object(_.jsx)(Ae,{course:n,format:"page"})})},rt=U.c.div(z||(z=Object(N.a)(["\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100vh;\n  "]))),ot=U.c.header(L||(L=Object(N.a)(["\n  max-width: 1270px;\n  margin: 0 auto;\n  text-align: center;\n  margin-bottom: 1rem;\n  padding-top: 1rem;\n"]))),ct=U.c.main(R||(R=Object(N.a)(["\n  max-width: 1270px;\n  margin: 0 auto;\n"])));function at(){var e=W(ge),t=W(pe),n=q();return Object(D.useEffect)((function(){n(Qe())}),[]),Object(D.useEffect)((function(){e&&!t.length&&n(Ye())}),[e]),Object(_.jsxs)(rt,{children:[Object(_.jsxs)(ot,{children:[Object(_.jsx)("h1",{children:"Test"}),Object(_.jsx)(et,{})]}),Object(_.jsx)(ct,{children:Object(_.jsx)(M.a,{})})]})}localStorage.clear();var st=Object(G.b)([{path:"/",element:Object(_.jsx)(at,{}),errorElement:Object(_.jsx)(V,{}),id:"root",children:[{path:"/",element:Object(_.jsx)(Le,{}),id:"homePage",errorElement:Object(_.jsx)(_.Fragment,{children:"Error on HomePage"})},{path:"/course/:id",element:Object(_.jsx)(nt,{}),errorElement:Object(_.jsx)(_.Fragment,{children:"Error on CoursePage"})}]}]),it=n(16),ut=n(22),dt=n(58),lt=n(56),bt=n.n(lt),pt=n(5),ft=n.n(pt),jt=n(10),gt=n(12),xt=function(){var e=Object(gt.a)(ft.a.mark((function e(t,n){var r;return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.wisey.app/api/v1/core/preview-courses/".concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Access-Control-Allow-Headers":"X-Requested-With, Content-Type, Authorization","Access-Control-Allow-Methods":"GET,POST,PUT,DELETE,OPTIONS","Access-Control-Allow-Origin":"https://ernestofernandezua.github.io"}}).then((function(e){return e.json()}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ot=ft.a.mark(ht);function ht(e){var t,n,r;return ft.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,console.log("getCourseSaga start"),o.next=4,Object(jt.d)(ge);case 4:if(n=o.sent){o.next=8;break}return o.next=8,console.log("getCourseSaga: token === null");case 8:return o.next=10,Object(jt.c)(ie("loading"));case 10:return o.prev=10,o.next=13,Object(jt.b)(3e3);case 13:return o.next=15,xt(n,t);case 15:return r=o.sent,o.next=18,console.log("getCourseSaga response",r);case 18:return o.next=20,Object(jt.c)(se(r));case 20:o.next=26;break;case 22:return o.prev=22,o.t0=o.catch(10),o.next=26,Object(jt.c)(de(o.t0.message));case 26:return o.prev=26,o.next=29,Object(jt.c)(ie("idle"));case 29:return o.finish(26);case 30:case"end":return o.stop()}}),Ot,null,[[10,22,26,30]])}var mt=function(){var e=Object(gt.a)(ft.a.mark((function e(t){var n;return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.wisey.app/api/v1/core/preview-courses/",{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Access-Control-Allow-Headers":"X-Requested-With, Content-Type, Authorization","Access-Control-Allow-Methods":"GET,POST,PUT,DELETE,OPTIONS","Access-Control-Allow-Origin":"https://ernestofernandezua.github.io"}}).then((function(e){return e.json()}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt=ft.a.mark(wt);function wt(){var e,t,n;return ft.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("getCoursesSaga start"),r.next=3,Object(jt.d)(ge);case 3:if(e=r.sent){r.next=7;break}return r.next=7,console.log("getCoursesSaga: token === null");case 7:return r.next=9,Object(jt.c)(be());case 9:return r.next=11,Object(jt.c)(ie("loading"));case 11:return r.prev=11,r.next=14,Object(jt.b)(3e3);case 14:return r.next=16,Object(jt.a)(mt,e);case 16:return t=r.sent,n=t.courses,r.next=20,console.log("courses",n);case 20:return r.next=22,Object(jt.c)(ae(n));case 22:r.next=28;break;case 24:return r.prev=24,r.t0=r.catch(11),r.next=28,Object(jt.c)(de(r.t0.message));case 28:return r.prev=28,r.next=31,Object(jt.c)(ie("idle"));case 31:return r.finish(28);case 32:case"end":return r.stop()}}),vt,null,[[11,24,28,32]])}var kt=function(){var e=Object(gt.a)(ft.a.mark((function e(){var t;return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.wisey.app/api/v1/auth/anonymous?platform=subscriptions",{method:"GET",headers:{"Access-Control-Allow-Headers":"X-Requested-With, Content-Type, Authorization","Access-Control-Allow-Methods":"GET,POST,PUT,DELETE,OPTIONS","Access-Control-Allow-Origin":"https://ernestofernandezua.github.io"}}).then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yt=ft.a.mark(St);function St(){var e,t;return ft.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("getTokenSaga start"),n.next=3,Object(jt.c)(ue());case 3:return n.next=5,Object(jt.c)(ie("loading"));case 5:return n.prev=5,n.next=8,Object(jt.a)(kt);case 8:return e=n.sent,t=e.token,console.log("getTokenSaga response",t),n.next=13,Object(jt.c)(le(t));case 13:n.next=19;break;case 15:return n.prev=15,n.t0=n.catch(5),n.next=19,Object(jt.c)(de(n.t0.message));case 19:return n.prev=19,n.next=22,Object(jt.c)(ie("idle"));case 22:return n.finish(19);case 23:case"end":return n.stop()}}),yt,null,[[5,15,19,23]])}var Et=ft.a.mark(Tt);function Tt(){var e,t;return ft.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("watchSaga"),n.next=3,Object(jt.d)(ge);case 3:return e=n.sent,n.next=6,Object(jt.d)(pe);case 6:if(t=n.sent,console.log("watchSaga",e,t),e){n.next=11;break}return n.next=11,Object(jt.f)(Xe,St);case 11:if(t.length){n.next=14;break}return n.next=14,Object(jt.e)(Je,wt);case 14:return n.next=16,Object(jt.e)(Ke,ht);case 16:case"end":return n.stop()}}),Et)}var Ct=ft.a.mark(Pt);function Pt(){return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("root saga"),e.next=3,Tt();case 3:case"end":return e.stop()}}),Ct)}var At,zt={popup:{}},Lt=Object(te.b)({name:"controls",initialState:zt,reducers:{resetState:function(){return zt}}}),Rt=Lt.reducer,Bt=(Lt.actions.resetState,Object(it.b)({control:Rt,products:Ve,basket:Fe,courses:oe})),It=Object(dt.a)(),Ft={key:"root",storage:bt.a,whitelist:["basket","courses"]},Ht=Object(ut.g)(Ft,Bt),Mt=Object(te.a)({reducer:Ht,middleware:function(e){return e({thunk:!1,serializableCheck:{ignoredActions:[ut.a,ut.f,ut.b,ut.c,ut.d,ut.e]}}).concat(It)}}),Nt=Object(ut.h)(Mt);It.run(Pt);var Dt=Object(U.a)(At||(At=Object(N.a)(["\n  * {\n    font-family: 'Raleway', sans-serif;\n    user-select: none;\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n"])));I.a.createRoot(document.getElementById("root")).render(Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Dt,{}),Object(_.jsx)(F.a,{store:Mt,children:Object(_.jsx)(H.a,{loading:null,persistor:Nt,children:Object(_.jsx)(M.c,{router:st})})})]}))}},[[73,1,2]]]);
//# sourceMappingURL=main.fd88b569.chunk.js.map