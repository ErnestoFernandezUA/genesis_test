(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{72:function(e,t,n){"use strict";n.r(t);var r,o,c,a,i,s,u,d,l,b,j,f,p,g,x,O,h,m,v,w,k,y,S,E,C,T,P,z,L,B=n(48),R=n.n(B),A=n(32),F=n(51),I=n(4),H=n(7),N=n(0),M=n(22),q=n(8),G=n(3),J=function(){return Object(G.jsx)("div",{children:"This page doesn\xa0t exist."})},W=A.b,X=A.c,_=Object(q.d)(r||(r=Object(H.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n"]))),K=q.c.div(o||(o=Object(H.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n"]))),U=q.c.div(c||(c=Object(H.a)(["\n  border-radius: 50%;\n  width: 2em;\n  height: 2em;\n  margin: 1em auto;\n  border: 0.3em solid #ddd;\n  border-left-color: #000;\n  animation: "," 1.2s infinite linear;\n"])),_),V=function(){return console.log("Loader ...."),Object(G.jsx)(K,{children:Object(G.jsx)(U,{})})},D=q.c.div(a||(a=Object(H.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n\n  ","\n"])),(function(e){return"error"===e.status&&Object(q.b)(i||(i=Object(H.a)(["\n    color: red;\n  "])))})),Q=function(e){var t=e.message,n=e.status,r=void 0===n?"casual":n;return Object(G.jsx)(D,{status:r,children:Object(G.jsx)("h2",{children:t})})},Y=n(17),Z=n(14),$=n(19),ee={storage:[],token:null,statusLoading:"idle",error:null},te=Object($.b)({name:"courses",initialState:ee,reducers:{setCourses:function(e,t){console.log("setCourses"),e.storage=Object(Z.a)(t.payload)},setStatus:function(e,t){e.statusLoading=t.payload},resetError:function(e){e.error=ee.error},setError:function(e,t){e.error=t.payload,e.statusLoading="failed"},setToken:function(e,t){console.log("setToken"),e.token=t.payload},resetStateExceptToken:function(e){return Object(Y.a)(Object(Y.a)(Object(Y.a)({},e),ee),{},{token:e.token})},resetState:function(e){return Object(Y.a)(Object(Y.a)({},e),ee)}}}),ne=te.reducer,re=te.actions,oe=re.setCourses,ce=re.setStatus,ae=re.resetError,ie=re.setError,se=re.setToken,ue=re.resetStateExceptToken,de=(re.resetState,function(e){return e.courses.storage}),le=function(e){return e.courses.statusLoading},be=function(e){return e.courses.error},je=function(e){return e.courses.token},fe=q.c.div(s||(s=Object(H.a)(["\n  text-align: center;\n  padding: 20px;\n"]))),pe=function(e){var t=e.children;return Object(G.jsx)(fe,{children:Object(G.jsx)("h2",{children:t})})},ge=q.c.div(u||(u=Object(H.a)(["\n  display: grid;\n  grid-template-columns: repeat(4, minmax(300px, 1fr));\n  gap: 20px;\n  justify-items: center;\n  align-items: center;\n  justify-content: center;\n"]))),xe=function(e){var t=e.children;return Object(G.jsx)(ge,{children:t})},Oe=n(55),he=q.c.div(d||(d=Object(H.a)(["\n  /* display: inline-flex; */\n  /* flex-direction: column;\n  align-items: center;\n  justify-content: baseline; */\n  width: 280px;\n  height: 450px;\n  border-radius: 10px;\n  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  margin: 10px;\n  box-sizing: border-box;\n  padding: 0 0 20px;\n\n  &:hover {\n    cursor: pointer;\n    ","\n  }\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(q.b)(l||(l=Object(H.a)(["\n    cursor: auto;\n  "])))}),(function(e){return"page"===e.format&&Object(q.b)(b||(b=Object(H.a)(["\n    display: flex;\n    width: 100%;\n    height: 100%;\n    border-radius: none;\n    box-shadow: none;\n    overflow: visible;\n    margin: 0;\n    padding: 0;\n  "])))})),me=q.c.img(j||(j=Object(H.a)(["\n  width: 100%;\n  height: 120px;\n  object-fit: cover;\n  overflow: hidden;\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(q.b)(f||(f=Object(H.a)(["\n    width: 300px;\n    height: 400px;\n    object-fit: cover;\n    overflow: visible;\n    margin: 0 auto;\n  "])))})),ve=q.c.div(p||(p=Object(H.a)(["\n  /* display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center; */\n  padding: 20px;\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(q.b)(g||(g=Object(H.a)(["\n    padding: 50px;\n  "])))})),we=q.c.h2(x||(x=Object(H.a)(["\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 7px;\n  max-width: 250px;\n  text-align: left;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-direction: normal;\n  -webkit-box-orient: vertical;\n  overflow-wrap: normal;\n  height: 48px;\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(q.b)(O||(O=Object(H.a)(["\n    font-size: 50px;\n    margin-top: 20px;\n    margin-bottom: 40px;\n    max-width: none;\n    -webkit-line-clamp: inherit;\n    text-align: center;\n    overflow: visible;\n    text-overflow: none;\n    height: auto;\n  "])))})),ke=q.c.p(h||(h=Object(H.a)(["\n  font-size: 14px;\n  text-align: left;\n  height: 60px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-direction: normal;\n  -webkit-box-orient: vertical;\n  overflow-wrap: break-word;\n  padding-top: 5px;\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(q.b)(m||(m=Object(H.a)(["\n    font-size: 24px;\n    text-align: center;\n    max-height: min-content;\n    text-overflow: clip;\n    overflow: visible;\n    -webkit-line-clamp: inherit;\n  "])))})),ye=q.c.h3(v||(v=Object(H.a)(["\n  font-size: 24px;\n  font-weight: bold;\n  margin-top: 10px;\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(q.b)(w||(w=Object(H.a)(["\n    font-size: 34px;\n    font-weight: bold;\n    margin-top: 20px;\n  "])))})),Se=q.c.div(k||(k=Object(H.a)(["\n  margin-top: 5px;\n  text-align: left;\n  align-self: flex-start;\n  font-size: 14px;\n\n  ","\n"])),(function(e){return"page"===e.format&&Object(q.b)(y||(y=Object(H.a)(["\n  "])))})),Ee=function(e){var t,n,r=e.course,o=e.format,c=void 0===o?"card":o,a=Object(N.useRef)(null),i=r.description,s=r.previewImageLink,u=r.title,d=r.id,l=r.rating;console.log(r.meta);var b=(null===(t=r.meta)||void 0===t||null===(n=t.courseVideoPreview)||void 0===n?void 0:n.link)||"";console.log(b),Object(N.useEffect)((function(){function e(){}var t=a.current;return t&&t.addEventListener("play",e),function(){t&&t.removeEventListener("play",e)}}),[a]);var j=Object(I.m)();return Object(G.jsxs)(he,{onClick:function(){"card"===c&&j("course/".concat(d),{replace:!0})},format:c,children:[Object(G.jsx)(me,{src:"".concat(s,"/cover.webp"),alt:i,format:c}),Object(G.jsxs)(ve,{format:c,children:[Object(G.jsx)(we,{format:c,children:u}),Object(G.jsx)(Oe.a,{playerRef:a,src:b,autoPlay:!1,controls:!0,width:"100%",height:"150px",hlsConfig:{startPosition:-1}}),Object(G.jsx)(ke,{format:c,children:i}),Object(G.jsx)(ye,{format:c}),Object(G.jsxs)(Se,{format:c,children:["Rating:\xa0",l]})]})]})},Ce=q.c.div(S||(S=Object(H.a)(["\n"]))),Te=function(){var e="loading"===X(le),t=X(be),n=X(de);return t?Object(G.jsx)(Q,{message:t,status:"error"}):Object(G.jsxs)(Ce,{children:[Object(G.jsx)(pe,{children:"Courses:"}),e&&Object(G.jsx)(V,{}),Object(G.jsx)(xe,{children:n.map((function(e){return Object(G.jsx)(Ee,{course:e},e.id)}))})]})},Pe=n(41),ze={storage:[],totalSum:0,totalCount:0,showSuccess:!1,statusPosting:"idle",error:null},Le=Object($.b)({name:"basket",initialState:ze,reducers:{addProductToBasket:function(e,t){var n=t.payload,r=n.count,o=n.product,c=e.storage.findIndex((function(e){return e.product.id===o.id}));c>=0?e.storage[c].countOrdered+=r:e.storage.push({product:o,countOrdered:r}),e.totalSum=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100,e.totalCount=e.storage.reduce((function(e,t){return e+t.countOrdered}),0)},removeProductFromBasket:function(e,t){var n=t.payload,r=n.count,o=n.product,c=e.storage.findIndex((function(e){return e.product.id===o.id}));c>=0&&e.storage[c].countOrdered>=r&&(e.storage[c].countOrdered-=r,e.totalSum=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100,e.totalCount=e.storage.reduce((function(e,t){return e+t.countOrdered}),0))},deleteProductInBasket:function(e,t){var n=t.payload.product,r=e.storage.findIndex((function(e){return e.product.id===n.id}));r>=0&&(e.storage.splice(r,1),e.totalSum=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100,e.totalCount=e.storage.reduce((function(e,t){return e+t.countOrdered}),0))},sendOrderToServer:function(){console.log("sendOrderToServer")},setShowSuccess:function(e,t){e.showSuccess=t.payload},setStatusPosting:function(e,t){e.statusPosting=t.payload},setError:function(e,t){e.error=t.payload,e.statusPosting="failed"},clearBasket:function(){return ze}}}),Be=Le.reducer,Re=Le.actions,Ae=(Re.addProductToBasket,Re.removeProductFromBasket,Re.deleteProductInBasket,Re.sendOrderToServer,Re.setShowSuccess,Re.setStatusPosting,Re.setError,Re.clearBasket),Fe=function(e){return e.basket.storage},Ie=function(e){return e.basket.totalCount},He=q.c.button(E||(E=Object(H.a)(["\n  padding: 0;\n  margin: 0;\n  border: none;\n  background-color: transparent;\n  outline: none;\n  justify-content: center;\n  cursor: pointer;\n  height: fit-content;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: 'Raleway', sans-serif;\n\n  &:hover{\n    text-decoration: underline;\n  }\n"]))),Ne={storage:[],statusLoading:"idle",error:null},Me=Object($.b)({name:"products",initialState:Ne,reducers:{setProducts:function(e,t){e.storage=t.payload},setStatus:function(e,t){e.statusLoading=t.payload},setError:function(e,t){e.error=t.payload,e.statusLoading="failed"},resetState:function(e){return Object(Y.a)(Object(Y.a)({},e),Ne)}}}),qe=Me.reducer,Ge=Me.actions,Je=(Ge.setProducts,Ge.setStatus,Ge.setError,Ge.resetState,function(e){return e.products.storage}),We="saga/FETCH_TOKEN",Xe="saga/FETCH_COURSES",_e=function(){return{type:We}},Ke=function(){return{type:Xe}},Ue=q.c.div(C||(C=Object(H.a)(["\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px;\n"]))),Ve=function(){var e=W(),t=X(Fe),n=X(Je),r=X(Ie);return Object(G.jsxs)(Ue,{children:[Object(G.jsx)(M.a,{to:"/",children:Object(G.jsx)(Pe.c,{})}),!n.length&&Object(G.jsx)(He,{onClick:function(){return e(Ke())},children:"reload courses"}),!!t.length&&Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(He,{onClick:function(){return e(Ae())},children:"Clear basket"}),"Total:",r]}),Object(G.jsx)(M.a,{to:"basket",children:t.length?Object(G.jsx)(Pe.a,{size:"2rem",color:"black"}):Object(G.jsx)(Pe.b,{size:"2rem",color:"grey"})})]})},De=q.c.div(T||(T=Object(H.a)(["\n  margin: 0 auto;\n  grid-template-columns: repeat(4, minmax(400px, 1fr));\n  gap: 20px;\n  margin: 0 auto;\n  padding: 20px;\n"]))),Qe=function(){var e=Object(I.o)().id,t=X(de).find((function(t){return String(t.id)===e}));return Object(G.jsx)(De,{children:t&&Object(G.jsx)(Ee,{course:t,format:"page"})})},Ye=q.c.div(P||(P=Object(H.a)(["\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100vh;\n  "]))),Ze=q.c.header(z||(z=Object(H.a)(["\n  max-width: 1270px;\n  margin: 0 auto;\n  text-align: center;\n  margin-bottom: 1rem;\n  padding-top: 1rem;\n"]))),$e=q.c.main(L||(L=Object(H.a)(["\n  max-width: 1270px;\n  margin: 0 auto;\n"])));function et(){var e=X(je),t=X(de),n=W();return Object(N.useEffect)((function(){n(_e())}),[]),Object(N.useEffect)((function(){e&&!t.length&&n(Ke())}),[e]),Object(G.jsxs)(Ye,{children:[Object(G.jsxs)(Ze,{children:[Object(G.jsx)("h1",{children:"Test"}),Object(G.jsx)(Ve,{})]}),Object(G.jsx)($e,{children:Object(G.jsx)(I.a,{})})]})}var tt=Object(M.b)([{path:"/",element:Object(G.jsx)(et,{}),errorElement:Object(G.jsx)(J,{}),id:"root",children:[{path:"/",element:Object(G.jsx)(Te,{}),id:"homePage",errorElement:Object(G.jsx)(G.Fragment,{children:"Error on HomePage"})},{path:"/course/:id",element:Object(G.jsx)(Qe,{}),errorElement:Object(G.jsx)(G.Fragment,{children:"Error on CoursePage"})}]}]),nt=n(15),rt=n(21),ot=n(57),ct=n(56),at=n.n(ct),it=n(6),st=n.n(it),ut=n(13),dt=st.a.mark(lt);function lt(){var e,t;return st.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("getCoursesSaga start"),n.next=3,Object(ut.c)(je);case 3:if(e=n.sent){n.next=7;break}return n.next=7,console.log("getCoursesSaga: token === null");case 7:return n.next=9,Object(ut.b)(ue());case 9:return n.next=11,Object(ut.b)(ce("loading"));case 11:return n.prev=11,n.next=14,Object(ut.a)(3e3);case 14:return n.next=16,fetch("https://api.wisey.app/api/v1/core/preview-courses/",{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Access-Control-Allow-Headers":"X-Requested-With, Content-Type, Authorization"}}).then((function(e){return e.json()}));case 16:return t=n.sent,n.next=19,console.log("response",t.courses);case 19:return n.next=21,Object(ut.b)(oe(t.courses));case 21:n.next=27;break;case 23:return n.prev=23,n.t0=n.catch(11),n.next=27,Object(ut.b)(ie(n.t0.message));case 27:return n.prev=27,n.next=30,Object(ut.b)(ce("idle"));case 30:return n.finish(27);case 31:case"end":return n.stop()}}),dt,null,[[11,23,27,31]])}var bt=st.a.mark(jt);function jt(){var e;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("getTokenSaga start"),t.next=3,Object(ut.b)(ae());case 3:return t.next=5,Object(ut.b)(ce("loading"));case 5:return t.prev=5,t.next=8,fetch("https://api.wisey.app/api/v1/auth/anonymous?platform=subscriptions",{method:"GET",headers:{"Access-Control-Allow-Headers":"X-Requested-With, Content-Type, Authorization"}}).then((function(e){return e.json()}));case 8:return e=t.sent,console.log("getTokenSaga response",e.token),t.next=12,Object(ut.b)(se(e.token));case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t.catch(5),t.next=18,Object(ut.b)(ie(t.t0.message));case 18:return t.prev=18,t.next=21,Object(ut.b)(ce("idle"));case 21:return t.finish(18);case 22:case"end":return t.stop()}}),bt,null,[[5,14,18,22]])}var ft=st.a.mark(pt);function pt(){var e,t;return st.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("watchSaga"),n.next=3,Object(ut.c)(je);case 3:return e=n.sent,n.next=6,Object(ut.c)(de);case 6:if(t=n.sent,console.log("watchSaga",e,t),e){n.next=11;break}return n.next=11,Object(ut.e)(We,jt);case 11:if(t.length){n.next=14;break}return n.next=14,Object(ut.d)(Xe,lt);case 14:case"end":return n.stop()}}),ft)}var gt=st.a.mark(xt);function xt(){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("root saga"),e.next=3,pt();case 3:case"end":return e.stop()}}),gt)}var Ot,ht={popup:{}},mt=Object($.b)({name:"controls",initialState:ht,reducers:{resetState:function(){return ht}}}),vt=mt.reducer,wt=(mt.actions.resetState,Object(nt.b)({control:vt,products:qe,basket:Be,courses:ne})),kt=Object(ot.a)(),yt={key:"root",storage:at.a,whitelist:["basket","courses"]},St=Object(rt.g)(yt,wt),Et=Object($.a)({reducer:St,middleware:function(e){return e({thunk:!1,serializableCheck:{ignoredActions:[rt.a,rt.f,rt.b,rt.c,rt.d,rt.e]}}).concat(kt)}}),Ct=Object(rt.h)(Et);kt.run(xt);var Tt=Object(q.a)(Ot||(Ot=Object(H.a)(["\n  * {\n    font-family: 'Raleway', sans-serif;\n    user-select: none;\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n"])));R.a.createRoot(document.getElementById("root")).render(Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Tt,{}),Object(G.jsx)(A.a,{store:Et,children:Object(G.jsx)(F.a,{loading:null,persistor:Ct,children:Object(G.jsx)(I.c,{router:tt})})})]}))}},[[72,1,2]]]);
//# sourceMappingURL=main.fa95b86c.chunk.js.map